<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">
<meta name="baidu-site-verification" content="Yu0REDPjKL">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Android源码,">










<meta name="description" content="JobScheduler在自己的进程中调度各种作业可以通过构建JobInfo来执行schedule(JobInfo)来执行一个job当一个Job标准声明创建，会在Application的JobService中执行任务，可以通过JobInfo.Build来在服务组件中对你的Job实现业务 framework层在执行Job的时候智能化，并尽可能的批量并推迟他们，如果没有指定结束日期，它可以随时运行，具">
<meta name="keywords" content="Android源码">
<meta property="og:type" content="article">
<meta property="og:title" content="JobScheduler介绍">
<meta property="og:url" content="https://tianhao.info/2018/01/13/JobScheduler介绍/index.html">
<meta property="og:site_name" content="非淡泊无以明志，非宁静无以致远.">
<meta property="og:description" content="JobScheduler在自己的进程中调度各种作业可以通过构建JobInfo来执行schedule(JobInfo)来执行一个job当一个Job标准声明创建，会在Application的JobService中执行任务，可以通过JobInfo.Build来在服务组件中对你的Job实现业务 framework层在执行Job的时候智能化，并尽可能的批量并推迟他们，如果没有指定结束日期，它可以随时运行，具">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2019-03-25T03:16:15.765Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="JobScheduler介绍">
<meta name="twitter:description" content="JobScheduler在自己的进程中调度各种作业可以通过构建JobInfo来执行schedule(JobInfo)来执行一个job当一个Job标准声明创建，会在Application的JobService中执行任务，可以通过JobInfo.Build来在服务组件中对你的Job实现业务 framework层在执行Job的时候智能化，并尽可能的批量并推迟他们，如果没有指定结束日期，它可以随时运行，具">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.4',
    sidebar: {"position":"left","display":"always","offset":12,"b2t":false,"scrollpercent":false,"onmobile":true},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>

<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>



  <link rel="canonical" href="https://tianhao.info/2018/01/13/JobScheduler介绍/">





  <title>JobScheduler介绍 | 非淡泊无以明志，非宁静无以致远.</title>
  








</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>
	<a href="https://your-url" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewbox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">非淡泊无以明志，非宁静无以致远.</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Subtitle</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-schedule">
          <a href="/schedule/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-calendar"></i> <br>
            
            日程表
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://tianhao.info/2018/01/13/JobScheduler介绍/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="田昊">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="非淡泊无以明志，非宁静无以致远.">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">JobScheduler介绍</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-01-13T04:32:07+08:00">
                2018-01-12
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Android/" itemprop="url" rel="index">
                    <span itemprop="name">Android</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/01/13/JobScheduler介绍/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2018/01/13/JobScheduler介绍/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  3.2k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  11
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="JobScheduler"><a href="#JobScheduler" class="headerlink" title="JobScheduler"></a>JobScheduler</h1><p>在自己的进程中调度各种作业<br>可以通过构建<strong>JobInfo</strong>来执行<strong>schedule(JobInfo)</strong>来执行一个job<br>当一个Job标准声明创建，会在Application的<strong>JobService</strong>中执行任务，可以通过JobInfo.Build来在服务组件中对你的Job实现业务</p>
<p>framework层在执行Job的时候智能化，并尽可能的批量并推迟他们，如果没有指定结束日期，它可以随时运行，具体取决于JobSchedule内部队列的状态</p>
<p>当Job在运行状态，在你的app中会持有系统的<strong>weakLock</strong>，处于这个原因，你不需要在其运行期间做任何唤醒处理</p>
<p>不需要初始化这个类，通过<br><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Context</span>.getSystemService(<span class="keyword">Context</span>.JOB_SCHEDULER_SERVICE)</span><br></pre></td></tr></table></figure></p>
<p>或者是<br><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Context</span>.getSystemService(<span class="keyword">Class</span>)</span><br></pre></td></tr></table></figure></p>
<p>获取</p>
<h2 id="enqueue"><a href="#enqueue" class="headerlink" title="enqueue"></a>enqueue</h2><p>Similar to schedule(JobInfo)，但是允许进行现有job的入队，如果一个相同id的job入队，将会替换原来id的job，但是任何先入队的任务将保留在下次运行时分发，相同id的job也会在下次的运时进行分发。</p>
<p>官方强烈建议将所有入队的job用相同的jobinfo，系统会选择最佳的安排等待处理/正在运行的任务。如果job在上次作业中更改，系统需要关联新的job这会导致job失败</p>
<p>应该避免使用<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">JobInfo<span class="selector-class">.Builder</span><span class="selector-class">.setExtras</span>(PersistableBundle)</span><br></pre></td></tr></table></figure></p>
<p>和<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">JobInfo<span class="selector-class">.Builder</span><span class="selector-class">.setTransientExtras</span>(Bundle)</span><br></pre></td></tr></table></figure></p>
<p>系统会检测之前的JobInfo，并在JobInfo改变的某些情况下出现这些错误，而且在队列中不可以使用<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">JobInfo<span class="selector-class">.Builder</span><span class="selector-class">.setClipData</span>(ClipData, int)</span><br></pre></td></tr></table></figure></p>
<p>即使ClipData完全相同，也会视为不同的JobInfo</p>
<p>###getAllPendingJobs </p>
<h3 id="getPendingJob"><a href="#getPendingJob" class="headerlink" title="getPendingJob"></a>getPendingJob</h3><h3 id="schedule"><a href="#schedule" class="headerlink" title="schedule"></a>schedule</h3><h3 id="cancel"><a href="#cancel" class="headerlink" title="cancel"></a>cancel</h3><hr>
<h1 id="Job"><a href="#Job" class="headerlink" title="Job"></a>Job</h1><h3 id="getBackoffPolicy"><a href="#getBackoffPolicy" class="headerlink" title="getBackoffPolicy"></a>getBackoffPolicy</h3><p>获取返回协议返回值有常量线性级，指数级</p>
<h3 id="getClipData"><a href="#getClipData" class="headerlink" title="getClipData"></a>getClipData</h3><p>返回夹在中间的值</p>
<h3 id="getClipGrantFlags"><a href="#getClipGrantFlags" class="headerlink" title="getClipGrantFlags"></a>getClipGrantFlags</h3><p>犯会ClipData授予的权限</p>
<h3 id="getEstimatedNetworkUploadBytes"><a href="#getEstimatedNetworkUploadBytes" class="headerlink" title="getEstimatedNetworkUploadBytes"></a>getEstimatedNetworkUploadBytes</h3><p>API 28 返回上传流量的预估值  </p>
<h3 id="getExtras"><a href="#getExtras" class="headerlink" title="getExtras"></a>getExtras</h3><p>获取序列化的bundle数据</p>
<h3 id="getFlexMillis"><a href="#getFlexMillis" class="headerlink" title="getFlexMillis"></a>getFlexMillis</h3><p>获取这个Job的弹性时间，只有在periodic Job的时候才有效，job可以在期末的弹性窗口中执行。</p>
<h3 id="getid"><a href="#getid" class="headerlink" title="getid"></a>getid</h3><p>与此job相关联的唯一id</p>
<h3 id="getMinFlexMillis"><a href="#getMinFlexMillis" class="headerlink" title="getMinFlexMillis"></a>getMinFlexMillis</h3><p>获取periodic job的最小弹性时间，</p>
<h3 id="getMinLatencyMillis"><a href="#getMinLatencyMillis" class="headerlink" title="getMinLatencyMillis"></a>getMinLatencyMillis</h3><p>不会定期工作的job，设置一个延迟来执行job的时间</p>
<h3 id="getRequiredNetwork"><a href="#getRequiredNetwork" class="headerlink" title="getRequiredNetwork"></a>getRequiredNetwork</h3><p>获取这个job的执行的网络类型</p>
<h3 id="getService"><a href="#getService" class="headerlink" title="getService"></a>getService</h3><p>获取job的服务断点</p>
<h3 id="getTransientExtras"><a href="#getTransientExtras" class="headerlink" title="getTransientExtras"></a>getTransientExtras</h3><p>返回一个bundle    </p>
<h3 id="getTriggerContentMaxDelay"><a href="#getTriggerContentMaxDelay" class="headerlink" title="getTriggerContentMaxDelay"></a>getTriggerContentMaxDelay</h3><p>当content uri改变的时候，这个时间是scheduing job的最大时间</p>
<h3 id="getTriggerContentUris"><a href="#getTriggerContentUris" class="headerlink" title="getTriggerContentUris"></a>getTriggerContentUris</h3><p>获取job的所有url为了调度job这个uris必须有所改变</p>
<h3 id="isPeriodic"><a href="#isPeriodic" class="headerlink" title="isPeriodic"></a>isPeriodic</h3><p>判断job是否在定期重复</p>
<hr>
<h1 id="JobBuilder"><a href="#JobBuilder" class="headerlink" title="JobBuilder"></a>JobBuilder</h1><p>###public JobInfo.Builder (int jobId,ComponentName jobService)</p>
<p>jobid:必须是跨版本的唯一id，必须在客户端内是唯一的。<br>jobService:JobScheduler收到的回</p>
<h3 id="addTriggerContentUri-JobInfo-TriggerContentUri-uri"><a href="#addTriggerContentUri-JobInfo-TriggerContentUri-uri" class="headerlink" title="addTriggerContentUri (JobInfo.TriggerContentUri uri)"></a>addTriggerContentUri (JobInfo.TriggerContentUri uri)</h3><p>通过ContentObserver监听的一个Uri，它的改变会导致job的执行，如果有一个uri与job关联，那么uri的改变才会影响job的执行<br>想要持续监听job，需要再JobService最近更改之前设置一个observer来监听相同的uri<br>这个操作与periodic 或者persist Job不兼容，执行会抛出异常</p>
<h3 id="setBackoffCriteria-long-initialBackoffMillis-int-backoffPolicy"><a href="#setBackoffCriteria-long-initialBackoffMillis-int-backoffPolicy" class="headerlink" title="setBackoffCriteria (long initialBackoffMillis, int backoffPolicy)"></a>setBackoffCriteria (long initialBackoffMillis, int backoffPolicy)</h3><ul>
<li>initialBackoffMillis Job失败时候等待初始化的时间</li>
<li>backoffPolicy 回退协议</li>
</ul>
<blockquote>
<p>设置回退/重试协议。</p>
</blockquote>
<h3 id="setClipData-ClipData-clip-int-grantFlags"><a href="#setClipData-ClipData-clip-int-grantFlags" class="headerlink" title="setClipData (ClipData clip,int grantFlags)"></a>setClipData (ClipData clip,int grantFlags)</h3><blockquote>
<p>提供ClipData的主要目的是允许授予与剪辑关联的数据的URI权限<br>任何在ClipData中Intent的flag将失效。只有这个方法中的flag生效，并将用于Clip中的所有uri或Intent</p>
</blockquote>
<h3 id="setEstimatedNetworkBytes-long-downloadBytes-long-uploadBytes"><a href="#setEstimatedNetworkBytes-long-downloadBytes-long-uploadBytes" class="headerlink" title="setEstimatedNetworkBytes(long downloadBytes, long uploadBytes)"></a>setEstimatedNetworkBytes(long downloadBytes, long uploadBytes)</h3><ul>
<li>downloadBytes 预估的下载量，是一个非负byte</li>
<li>uploadBytes 预估的上传流量，是一个非负byte</li>
</ul>
<blockquote>
<p>设置此作业将执行的网络流量的估计大小（以字节为单位）<br>当确切的流量大小不确定时，提供一个预估值<br>这只是反映了基本任务的流量，如果用JobWorkItem在创建他们的时候还需要定义每个Item的网络流量</p>
</blockquote>
<h3 id="setExtras-PersistableBundle-API28"><a href="#setExtras-PersistableBundle-API28" class="headerlink" title="setExtras(PersistableBundle)  API28"></a>setExtras(PersistableBundle)  <font face="楷体" color="#FF0000"><em>API28</em></font></h3><p> 包含附加的信息，该值不能为空</p>
<h3 id="setImportantWhileForeground-boolean-importantWhileForeground-API28"><a href="#setImportantWhileForeground-boolean-importantWhileForeground-API28" class="headerlink" title="setImportantWhileForeground (boolean importantWhileForeground)API28"></a>setImportantWhileForeground (boolean importantWhileForeground)<font face="楷体" color="#FF0000"><em>API28</em></font></h3><blockquote>
<p>如果系统后台限制的话应该用这个flag，如果没有后台限制的话，这个flag失效</p>
</blockquote>
<h3 id="setMinimumLatency-long-minLatencyMillis"><a href="#setMinimumLatency-long-minLatencyMillis" class="headerlink" title="setMinimumLatency (long minLatencyMillis)"></a>setMinimumLatency (long minLatencyMillis)</h3><blockquote>
<p>指定这个job应该延迟的时间，在periodic job设置这个没有意义抛出异常</p>
</blockquote>
<h3 id="setOverrideDeadline-long-maxExecutionDelayMillis"><a href="#setOverrideDeadline-long-maxExecutionDelayMillis" class="headerlink" title="setOverrideDeadline (long maxExecutionDelayMillis)"></a>setOverrideDeadline (long maxExecutionDelayMillis)</h3><blockquote>
<p>设置最大延迟的期限，即使其他条件不符合，job将会在这个截止时间去执行，在periodic job设置会抛出异常</p>
</blockquote>
<h3 id="setPeriodic-long-intervalMillis"><a href="#setPeriodic-long-intervalMillis" class="headerlink" title="setPeriodic (long intervalMillis)"></a>setPeriodic (long intervalMillis)</h3><ul>
<li>intervalMillis 重复出现的间隔</li>
</ul>
<blockquote>
<p>指定该作业应该以提供的时间间隔重复出现，每个时期不超过一次。你无法控制在此间隔内何时执行此作业，<br>job设置了<em>setMinimumLatency</em> 或<em>setOverrideDeadline</em>将会抛出错误。</p>
</blockquote>
<h3 id="setPeriodic-long-intervalMillis-long-flexMillis"><a href="#setPeriodic-long-intervalMillis-long-flexMillis" class="headerlink" title="setPeriodic (long intervalMillis,long flexMillis)"></a>setPeriodic (long intervalMillis,long flexMillis)</h3><ul>
<li>intervalMillis 重复出现的间隔</li>
<li>flexMillis 限制时间为getMinFlexMillis() 或者5%以他们较高为准。</li>
</ul>
<blockquote>
<p>任务可以在任何时间末的弹性窗口中执行</p>
</blockquote>
<h3 id="setPersisted-boolean-isPersisted-需要权限-RECEIVE-BOOT-COMPLETED"><a href="#setPersisted-boolean-isPersisted-需要权限-RECEIVE-BOOT-COMPLETED" class="headerlink" title="setPersisted (boolean isPersisted) 需要权限( RECEIVE_BOOT_COMPLETED )"></a>setPersisted (boolean isPersisted) 需要权限(<font face="楷体" color="#FF0000"> RECEIVE_BOOT_COMPLETED </font>)</h3><ul>
<li>isPersisted 设置job将写入磁盘并在加载时启动</li>
</ul>
<blockquote>
<p>设置重启磁盘的时候job是否保留</p>
</blockquote>
<h3 id="setPrefetch-boolean-prefetch"><a href="#setPrefetch-boolean-prefetch" class="headerlink" title="setPrefetch (boolean prefetch)"></a>setPrefetch (boolean prefetch)</h3><ul>
<li>设置为true表示将预取一下用户信息来改善用户体验</li>
</ul>
<blockquote>
<p>例如当存在可计量数据的时候，允许作业在计量网络上执行。<br>系统还可以用此flag与用户模式绑定，确保数据在用户启动应用程序前被预取</p>
</blockquote>
<h3 id="setRequiredNetwork-NetworkRequest-networkRequest-API28"><a href="#setRequiredNetwork-NetworkRequest-networkRequest-API28" class="headerlink" title="setRequiredNetwork (NetworkRequest networkRequest)API28"></a>setRequiredNetwork (NetworkRequest networkRequest)<font face="楷体" color="#FF0000"><em>API28</em></font></h3><ul>
<li>networkRequest</li>
</ul>
<blockquote>
<p>设置你job的网络具体描述,如果网络不可用，则job不会运行。<br>用setOverrideDeadline(long)来改变这条规则。调用了这个方法将会覆盖setRequiredNetwork的属性，通常你只会设置一个。</p>
</blockquote>
<h3 id="setRequiredNetwork-NetworkRequest-networkRequest"><a href="#setRequiredNetwork-NetworkRequest-networkRequest" class="headerlink" title="setRequiredNetwork (NetworkRequest networkRequest)"></a>setRequiredNetwork (NetworkRequest networkRequest)</h3><blockquote>
<p>当您的作业在JobService.onStartJob（JobParameters）中执行时，请确保使用JobParameters.getNetwork（）返回的特定网络，否则您将使用可能不符合此限制的默认网络。</p>
</blockquote>
<h3 id="setRequiredNetworkType-int-networkType"><a href="#setRequiredNetworkType-int-networkType" class="headerlink" title="setRequiredNetworkType(int networkType)"></a>setRequiredNetworkType(int networkType)</h3><ul>
<li>networkType</li>
</ul>
<blockquote>
<p>如果您的作业不需要网络连接，则不需要调用此方法，默认值为JobInfo.NETWORK_TYPE_NONE。</p>
</blockquote>
<h3 id="setRequiresBatteryNotLow-boolean-batteryNotLow"><a href="#setRequiresBatteryNotLow-boolean-batteryNotLow" class="headerlink" title="setRequiresBatteryNotLow(boolean batteryNotLow)"></a>setRequiresBatteryNotLow(boolean batteryNotLow)</h3><ul>
<li>job在低电量的时候不执行？当用户出现低电量提示的时候，这个属性会生效。</li>
</ul>
<h3 id="setRequiresCharging-boolean-requiresCharging"><a href="#setRequiresCharging-boolean-requiresCharging" class="headerlink" title="setRequiresCharging (boolean requiresCharging)"></a>setRequiresCharging (boolean requiresCharging)</h3><ul>
<li>job必须在充电的时候执行</li>
</ul>
<blockquote>
<p>电源插在usb上或者不是在墙上电源的时候，电源也可能消耗殆尽，这个也不会生效</p>
</blockquote>
<h3 id="setRequiresDeviceIdle-boolean-requiresDeviceIdle"><a href="#setRequiresDeviceIdle-boolean-requiresDeviceIdle" class="headerlink" title="setRequiresDeviceIdle (boolean requiresDeviceIdle)"></a>setRequiresDeviceIdle (boolean requiresDeviceIdle)</h3><ul>
<li>requiresDeviceIdle job是否在交互的时候使用</li>
</ul>
<blockquote>
<p>true则job不会在设备运行的时候使用，表明设备没有在活动，并且有一段时间没有在使用</p>
</blockquote>
<h3 id="setRequiresStorageNotLow-boolean-storageNotLow"><a href="#setRequiresStorageNotLow-boolean-storageNotLow" class="headerlink" title="setRequiresStorageNotLow (boolean storageNotLow)"></a>setRequiresStorageNotLow (boolean storageNotLow)</h3><ul>
<li>storageNotLow 设备的存储量不低</li>
</ul>
<blockquote>
<p>这通常指设备提示了用户的存储量低</p>
</blockquote>
<h3 id="setTransientExtras-Bundle-extras"><a href="#setTransientExtras-Bundle-extras" class="headerlink" title="setTransientExtras (Bundle extras)"></a>setTransientExtras (Bundle extras)</h3><ul>
<li>extras 设置可选择的临时信息</li>
</ul>
<blockquote>
<p>不能再periodic job中设置，会抛出异常</p>
</blockquote>
<h3 id="setTriggerContentMaxDelay-long-durationMs"><a href="#setTriggerContentMaxDelay-long-durationMs" class="headerlink" title="setTriggerContentMaxDelay (long durationMs)"></a>setTriggerContentMaxDelay (long durationMs)</h3><ul>
<li>durationMs </li>
</ul>
<blockquote>
<p>设置从第一次检测内容改变到job schedule执行的最大延迟</p>
</blockquote>
<h3 id="setTriggerContentUpdateDelay-long-durationMs"><a href="#setTriggerContentUpdateDelay-long-durationMs" class="headerlink" title="setTriggerContentUpdateDelay (long durationMs)"></a>setTriggerContentUpdateDelay (long durationMs)</h3><ul>
<li>durationMs </li>
</ul>
<blockquote>
<p>设置检测到内容到job 执行的延迟，如果job有修改，则延迟重新计算。</p>
</blockquote>
<hr>
<h1 id="JobInfo-TriggerContentUri"><a href="#JobInfo-TriggerContentUri" class="headerlink" title="JobInfo.TriggerContentUri"></a>JobInfo.TriggerContentUri</h1><p> 表明job想触发改Uri修改的信息</p>
<h2 id="常量："><a href="#常量：" class="headerlink" title="常量："></a>常量：</h2><h3 id="FLAG-NOTIFY-FOR-DESCENDANTS-value-is-0x000001"><a href="#FLAG-NOTIFY-FOR-DESCENDANTS-value-is-0x000001" class="headerlink" title="FLAG_NOTIFY_FOR_DESCENDANTS  value is 0x000001"></a>FLAG_NOTIFY_FOR_DESCENDANTS  value is 0x000001</h3><p>uri修改的时候触发</p>
<p>对应于ContentResolver.registerContentObserver（Uri，boolean，ContentObserver）的notifyForDescendants。</p>
<h2 id="构造函数"><a href="#构造函数" class="headerlink" title="构造函数"></a>构造函数</h2><h3 id="public-JobInfo-TriggerContentUri-Uri-uri-int-flags"><a href="#public-JobInfo-TriggerContentUri-Uri-uri-int-flags" class="headerlink" title="public JobInfo.TriggerContentUri (Uri uri, int flags)"></a>public JobInfo.TriggerContentUri (Uri uri, int flags)</h3><ul>
<li>uri 会触发的uri</li>
<li>flags 就是常量定义的那个</li>
</ul>
<hr>
<h1 id="JobParameters"><a href="#JobParameters" class="headerlink" title="JobParameters"></a>JobParameters</h1><p>包含了设置/认证Job的属性</p>
<p>##方法</p>
<h3 id="completeWork-JobWorkItem-work"><a href="#completeWork-JobWorkItem-work" class="headerlink" title="completeWork (JobWorkItem work)"></a>completeWork (JobWorkItem work)</h3><ul>
<li>work 你已经完成处理的工作</li>
</ul>
<p>报告之前<em>dequeueWork()</em>的JobWorkItem情况，就是告诉系统你已经完成了，不需要返回信息了 ，如果这队列中的最后一个item那么完成它则不会完成它的工作，要实现这一点，你还需要调用<em>dequeu()</em>方法</p>
<p>如果你要进入排队工作，那么必须调用此方法，不要调用其他的方法否则你会失去这个job</p>
<h3 id="dequeueWork"><a href="#dequeueWork" class="headerlink" title="dequeueWork()"></a>dequeueWork()</h3><blockquote>
<p>从当前的运行的job中的JobParameters取得下一个JobWorkItem<br>当没有更多的工作可用并且所有先前离队的工作已完成时调用此方法将导致系统处理您的工作<br>不可以调用<em>jobFinished(JobParameters, boolean)</em>否则你可能丢失即将到来入队的JobWorkItem</p>
</blockquote>
<blockquote>
<p>一旦调用这个方法出队列，你必须调用<em>completeWork(JobWorkItem)</em>来告诉系统你已经完成了工作<br>job在所有队列出队的时候才会完成工作。否则在下一个出队之前必须完成每一个出队的工作。<br>如果你想要并行处理job，可以在完成之前的工作之前多次使用dequeueWork（），并且在你想让它结束的地方结束</p>
</blockquote>
<blockquote>
<p>如果作业在所有工作完成之前运行到其可用时间段的末尾，则会正常停止。应该从JobService.onStopJob（JobParameters）返回true以便重新安排作业，并且通过这样做，任何未完成和未完成的作业都将在下一次作业运行时重新排队。</p>
</blockquote>
<h3 id="describeContents"><a href="#describeContents" class="headerlink" title="describeContents ()"></a>describeContents ()</h3><blockquote>
<p>标识指定序列化实例封装的对象种类，例如，如果对象将在writeToParcel（Parcel，int）的输出中包含文件描述符，则此方法的返回值必须包含CONTENTS_FILE_DESCRIPTOR位。</p>
</blockquote>
<h3 id="getClipGrantFlags-1"><a href="#getClipGrantFlags-1" class="headerlink" title="getClipGrantFlags()"></a>getClipGrantFlags()</h3><blockquote>
<p>使用JobInfo.Builder.setClipData（ClipData，int）构造此作业时传入的剪辑授予标志。如果未设置，则为0。</p>
</blockquote>
<h3 id="getTransientExtras（）"><a href="#getTransientExtras（）" class="headerlink" title="getTransientExtras（）"></a>getTransientExtras（）</h3><blockquote>
<p>在使用JobInfo.Builder.setTransientExtras（android.os.Bundle）构造此作业时传入的瞬态额外值。这永远不会为空。如果你没有设置任何额外的东西，这将是一个bundle。</p>
</blockquote>
<h3 id="getTriggeredContentAuthorities"><a href="#getTriggeredContentAuthorities" class="headerlink" title="getTriggeredContentAuthorities()"></a>getTriggeredContentAuthorities()</h3><blockquote>
<p>这报告哪些内容管理机构已经触发了这项工作如果没有权威机构触发它 - 也就是说，由于某种其他原因（如截止日期过期）而执行的作业，它只会为空。<br>如果这是非空值，则可以使用getTriggeredContentUris（）来检索已更改的URI的详细信息（只要该值未超过可报告的最大数量）。</p>
</blockquote>
<h1 id="JobService"><a href="#JobService" class="headerlink" title="JobService"></a>JobService</h1><blockquote>
<p>jobScheduler回调的入口。<br>这是处理jobScheduled的异步请求的基类。你需要重写<em>onStartJob</em>方法，这是你实现工作逻辑的地方。<br>该服务在应用程序主线程上运行的Handler上执行每个传入作业，这意味着你必须将你的执行逻辑卸载到另一个线程/处理程序/AsyncTask中去。不这样做会导致阻止任何将来从<em>JobManager</em>回调 - 特别是<em>onStopJob（android.app.job.JobParameters）</em>，这意味着通知您不再满足调度要求。</p>
</blockquote>
<p>##变量<br>必须执行此项权限</p>
<p>PERMISSION_BIND</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Job services must be <span class="keyword">protected</span> with <span class="keyword">this</span> <span class="string">permission:</span></span><br><span class="line">     &lt;service <span class="string">android:</span>name=<span class="string">"MyJobService"</span></span><br><span class="line"><span class="symbol">              android:</span>permission=<span class="string">"android.permission.BIND_JOB_SERVICE"</span> &gt;</span><br><span class="line">         ...</span><br></pre></td></tr></table></figure>
<p>##方法 </p>
<h3 id="public-final-void-jobFinished-JobParameters-params-boolean-wantsReschedule"><a href="#public-final-void-jobFinished-JobParameters-params-boolean-wantsReschedule" class="headerlink" title="public final void jobFinished (JobParameters params,boolean wantsReschedule)"></a>public final void jobFinished (JobParameters params,boolean wantsReschedule)</h3><ul>
<li>params 这个job的参数，在startService中设置的Params</li>
<li>wantsReschedule 如果应根据首次计划时指定的回退标准重新计划此作业，则为true;否则为假。</li>
</ul>
<blockquote>
<p>通知jobSchedule已经完成了工作，当系统收到这个消息的时候，会释放正在进行的唤醒锁。<br>你可以传递true来请求安排此job，这将适用于该工作的回退协议;当原始计划作业时，可以通过JobInfo.Builder.setBackoffCriteria（long，int）方法调整此策略，不管回退协议如何，job在最初的请求将会保留。</p>
</blockquote>
<h3 id="onStartJob-JobParameters-params"><a href="#onStartJob-JobParameters-params" class="headerlink" title="onStartJob (JobParameters params)"></a>onStartJob (JobParameters params)</h3><ul>
<li>params</li>
<li>retrun boolean 如果您的服务将继续运行，请在适当时使用单独的线程为true.false表示已经停止运行</li>
</ul>
<blockquote>
<p>如果你想让job持续工作，那么返回true<br>如果这样做，那么作业将保持活动状态，直到您调用jobFinished（JobParameters，boolean）以告诉系统它已完成其工作，或者直到不再满足作业所需的约束<br>例如，如果使用setRequiresCharging（true）计划作业，则系统会立即暂停该作业，如果用户拔掉设备电源，作业的onStopJob（JobParameters）回调将被调用，并且应用程序将被期望关闭与该作业相关的所有正在进行的工作。</p>
</blockquote>
<blockquote>
<p>只要您的工作正在执行，系统就会代表您的应用程序拥有一个唤醒锁这个wakelock是在调用这个方法之前获得的，直到你调用jobFinished（JobParameters，boolean），或者在系统调用onStopJob（JobParameters）来通知你的作业过早关闭之后才会释放。<br>从此方法返回错误意味着您的工作已完成。该系统的工作唤醒锁将被释放，onStopJob（JobParameters）将不会被调用。</p>
</blockquote>
<h3 id="boolean-onStopJob-JobParameters-params"><a href="#boolean-onStopJob-JobParameters-params" class="headerlink" title="boolean onStopJob (JobParameters params)"></a>boolean onStopJob (JobParameters params)</h3><ul>
<li>返回值 true表示要向JobManager表明是否希望根据作业创建时提供的重试条件重新计划此作业。false表示完全结束工作。</li>
</ul>
<blockquote>
<p>如果系统已确定您甚至在有机会调用jobFinished（JobParameters，boolean）之前必须停止执行您的工作，则调用此方法。</p>
<p>如果不再满足在计划时间指定的要求，则会发生这种情况。</p>
</blockquote>
<h1 id="JobWorkItem"><a href="#JobWorkItem" class="headerlink" title="JobWorkItem"></a>JobWorkItem</h1><blockquote>
<p>使用JobScheduler.enqueue可以加入工作的工作单元。有关更多详细信息，请参阅JobParameters.dequeueWork。</p>
</blockquote>
<p>#JobServiceEngine</p>
<blockquote>
<p>这不适合常规应用程序使用，但允许构建在平台之上的框架创建自己的Service，以便与JobScheduler交互以及添加其他功能<br>如果您只是想正常执行作业，则应该查看JobService。</p>
</blockquote>

      
    </div>
    
    
    
    

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div>谢谢您的鼓励~</div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>打赏</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="/images/wechatpay.jpg" alt="田昊 微信支付">
        <p>微信支付</p>
      </div>
    

    
      <div id="alipay" style="display: inline-block">
        <img id="alipay_qr" src="/images/alipay.jpg" alt="田昊 支付宝">
        <p>支付宝</p>
      </div>
    

    

  </div>
</div>

      </div>
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Android源码/" rel="tag"># Android源码</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/12/06/算法升级之路（一）/" rel="next" title="算法升级之路（一）">
                <i class="fa fa-chevron-left"></i> 算法升级之路（一）
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/01/16/支付系统/" rel="prev" title="支付SDK的业务流程">
                支付SDK的业务流程 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
    </div>
  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
      <div id="sidebar-dimmer"></div>
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.jpg" alt="田昊">
            
              <p class="site-author-name" itemprop="name">田昊</p>
              <p class="site-description motion-element" itemprop="description">一个对技术有态度的程序员</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">62</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">16</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">34</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/THtianhao" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="envelope" target="_blank" title="E-Mail tototianhao@gmail.com">
                      
                        <i class="fa fa-fw fa-globe"></i>E-Mail tototianhao@gmail.com</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="undefined" target="_blank" title="QQ 356831631">
                      
                        <i class="fa fa-fw fa-globe"></i>QQ 356831631</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="undefined" target="_blank" title="tel 13233422221">
                      
                        <i class="fa fa-fw fa-globe"></i>tel 13233422221</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="undefined" target="_blank" title="weChat toto000888">
                      
                        <i class="fa fa-fw fa-globe"></i>weChat toto000888</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#JobScheduler"><span class="nav-number">1.</span> <span class="nav-text">JobScheduler</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#enqueue"><span class="nav-number">1.1.</span> <span class="nav-text">enqueue</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#getPendingJob"><span class="nav-number">1.1.1.</span> <span class="nav-text">getPendingJob</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#schedule"><span class="nav-number">1.1.2.</span> <span class="nav-text">schedule</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#cancel"><span class="nav-number">1.1.3.</span> <span class="nav-text">cancel</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Job"><span class="nav-number">2.</span> <span class="nav-text">Job</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#getBackoffPolicy"><span class="nav-number">2.0.1.</span> <span class="nav-text">getBackoffPolicy</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#getClipData"><span class="nav-number">2.0.2.</span> <span class="nav-text">getClipData</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#getClipGrantFlags"><span class="nav-number">2.0.3.</span> <span class="nav-text">getClipGrantFlags</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#getEstimatedNetworkUploadBytes"><span class="nav-number">2.0.4.</span> <span class="nav-text">getEstimatedNetworkUploadBytes</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#getExtras"><span class="nav-number">2.0.5.</span> <span class="nav-text">getExtras</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#getFlexMillis"><span class="nav-number">2.0.6.</span> <span class="nav-text">getFlexMillis</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#getid"><span class="nav-number">2.0.7.</span> <span class="nav-text">getid</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#getMinFlexMillis"><span class="nav-number">2.0.8.</span> <span class="nav-text">getMinFlexMillis</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#getMinLatencyMillis"><span class="nav-number">2.0.9.</span> <span class="nav-text">getMinLatencyMillis</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#getRequiredNetwork"><span class="nav-number">2.0.10.</span> <span class="nav-text">getRequiredNetwork</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#getService"><span class="nav-number">2.0.11.</span> <span class="nav-text">getService</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#getTransientExtras"><span class="nav-number">2.0.12.</span> <span class="nav-text">getTransientExtras</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#getTriggerContentMaxDelay"><span class="nav-number">2.0.13.</span> <span class="nav-text">getTriggerContentMaxDelay</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#getTriggerContentUris"><span class="nav-number">2.0.14.</span> <span class="nav-text">getTriggerContentUris</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#isPeriodic"><span class="nav-number">2.0.15.</span> <span class="nav-text">isPeriodic</span></a></li></ol></li></ol><li class="nav-item nav-level-1"><a class="nav-link" href="#JobBuilder"><span class="nav-number">3.</span> <span class="nav-text">JobBuilder</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#addTriggerContentUri-JobInfo-TriggerContentUri-uri"><span class="nav-number">3.0.1.</span> <span class="nav-text">addTriggerContentUri (JobInfo.TriggerContentUri uri)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#setBackoffCriteria-long-initialBackoffMillis-int-backoffPolicy"><span class="nav-number">3.0.2.</span> <span class="nav-text">setBackoffCriteria (long initialBackoffMillis, int backoffPolicy)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#setClipData-ClipData-clip-int-grantFlags"><span class="nav-number">3.0.3.</span> <span class="nav-text">setClipData (ClipData clip,int grantFlags)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#setEstimatedNetworkBytes-long-downloadBytes-long-uploadBytes"><span class="nav-number">3.0.4.</span> <span class="nav-text">setEstimatedNetworkBytes(long downloadBytes, long uploadBytes)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#setExtras-PersistableBundle-API28"><span class="nav-number">3.0.5.</span> <span class="nav-text">setExtras(PersistableBundle)  API28</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#setImportantWhileForeground-boolean-importantWhileForeground-API28"><span class="nav-number">3.0.6.</span> <span class="nav-text">setImportantWhileForeground (boolean importantWhileForeground)API28</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#setMinimumLatency-long-minLatencyMillis"><span class="nav-number">3.0.7.</span> <span class="nav-text">setMinimumLatency (long minLatencyMillis)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#setOverrideDeadline-long-maxExecutionDelayMillis"><span class="nav-number">3.0.8.</span> <span class="nav-text">setOverrideDeadline (long maxExecutionDelayMillis)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#setPeriodic-long-intervalMillis"><span class="nav-number">3.0.9.</span> <span class="nav-text">setPeriodic (long intervalMillis)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#setPeriodic-long-intervalMillis-long-flexMillis"><span class="nav-number">3.0.10.</span> <span class="nav-text">setPeriodic (long intervalMillis,long flexMillis)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#setPersisted-boolean-isPersisted-需要权限-RECEIVE-BOOT-COMPLETED"><span class="nav-number">3.0.11.</span> <span class="nav-text">setPersisted (boolean isPersisted) 需要权限( RECEIVE_BOOT_COMPLETED )</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#setPrefetch-boolean-prefetch"><span class="nav-number">3.0.12.</span> <span class="nav-text">setPrefetch (boolean prefetch)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#setRequiredNetwork-NetworkRequest-networkRequest-API28"><span class="nav-number">3.0.13.</span> <span class="nav-text">setRequiredNetwork (NetworkRequest networkRequest)API28</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#setRequiredNetwork-NetworkRequest-networkRequest"><span class="nav-number">3.0.14.</span> <span class="nav-text">setRequiredNetwork (NetworkRequest networkRequest)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#setRequiredNetworkType-int-networkType"><span class="nav-number">3.0.15.</span> <span class="nav-text">setRequiredNetworkType(int networkType)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#setRequiresBatteryNotLow-boolean-batteryNotLow"><span class="nav-number">3.0.16.</span> <span class="nav-text">setRequiresBatteryNotLow(boolean batteryNotLow)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#setRequiresCharging-boolean-requiresCharging"><span class="nav-number">3.0.17.</span> <span class="nav-text">setRequiresCharging (boolean requiresCharging)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#setRequiresDeviceIdle-boolean-requiresDeviceIdle"><span class="nav-number">3.0.18.</span> <span class="nav-text">setRequiresDeviceIdle (boolean requiresDeviceIdle)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#setRequiresStorageNotLow-boolean-storageNotLow"><span class="nav-number">3.0.19.</span> <span class="nav-text">setRequiresStorageNotLow (boolean storageNotLow)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#setTransientExtras-Bundle-extras"><span class="nav-number">3.0.20.</span> <span class="nav-text">setTransientExtras (Bundle extras)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#setTriggerContentMaxDelay-long-durationMs"><span class="nav-number">3.0.21.</span> <span class="nav-text">setTriggerContentMaxDelay (long durationMs)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#setTriggerContentUpdateDelay-long-durationMs"><span class="nav-number">3.0.22.</span> <span class="nav-text">setTriggerContentUpdateDelay (long durationMs)</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#JobInfo-TriggerContentUri"><span class="nav-number">4.</span> <span class="nav-text">JobInfo.TriggerContentUri</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#常量："><span class="nav-number">4.1.</span> <span class="nav-text">常量：</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#FLAG-NOTIFY-FOR-DESCENDANTS-value-is-0x000001"><span class="nav-number">4.1.1.</span> <span class="nav-text">FLAG_NOTIFY_FOR_DESCENDANTS  value is 0x000001</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#构造函数"><span class="nav-number">4.2.</span> <span class="nav-text">构造函数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#public-JobInfo-TriggerContentUri-Uri-uri-int-flags"><span class="nav-number">4.2.1.</span> <span class="nav-text">public JobInfo.TriggerContentUri (Uri uri, int flags)</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#JobParameters"><span class="nav-number">5.</span> <span class="nav-text">JobParameters</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#completeWork-JobWorkItem-work"><span class="nav-number">5.0.1.</span> <span class="nav-text">completeWork (JobWorkItem work)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#dequeueWork"><span class="nav-number">5.0.2.</span> <span class="nav-text">dequeueWork()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#describeContents"><span class="nav-number">5.0.3.</span> <span class="nav-text">describeContents ()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#getClipGrantFlags-1"><span class="nav-number">5.0.4.</span> <span class="nav-text">getClipGrantFlags()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#getTransientExtras（）"><span class="nav-number">5.0.5.</span> <span class="nav-text">getTransientExtras（）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#getTriggeredContentAuthorities"><span class="nav-number">5.0.6.</span> <span class="nav-text">getTriggeredContentAuthorities()</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#JobService"><span class="nav-number">6.</span> <span class="nav-text">JobService</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#public-final-void-jobFinished-JobParameters-params-boolean-wantsReschedule"><span class="nav-number">6.0.1.</span> <span class="nav-text">public final void jobFinished (JobParameters params,boolean wantsReschedule)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#onStartJob-JobParameters-params"><span class="nav-number">6.0.2.</span> <span class="nav-text">onStartJob (JobParameters params)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#boolean-onStopJob-JobParameters-params"><span class="nav-number">6.0.3.</span> <span class="nav-text">boolean onStopJob (JobParameters params)</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#JobWorkItem"><span class="nav-number">7.</span> <span class="nav-text">JobWorkItem</span></a></li></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">一点零点零</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">Site words total count&#58;</span>
    
    <span title="Site words total count">94.1k</span>
  
</div>










  <script src="https://unpkg.com/mermaid@7.1.2/dist/mermaid.min.js"></script>
  <script>
    if (window.mermaid) {
      mermaid.initialize("");
    }
  </script>


        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  










  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
  
  <script type="text/javascript">
    var GUEST = ['nick','mail','link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item=>{
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: false,
        notify: false,
        appId: 'HLUXSB6s2sdrSljlaJgMe8x8-gzGzoHsz',
        appKey: 'vaOKTphb8yk9eoDDp5NvC6Ip',
        placeholder: 'ヾﾉ≧∀≦)o 来呀！快活呀！~',
        avatar:'/upload/avatar.jpg',
        guest_info:guest,
        pageSize:'10' || 10,
    });
  </script>



  





  

  

  

  
  

  

  

  

</body>
</html>
